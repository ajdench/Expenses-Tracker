<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#f8f9fa" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>Trip Expense Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <link rel="icon" type="image/png" href="favicon.png">
  <link href="styles.css?v=dev" rel="stylesheet" />
  <link rel="manifest" href="manifest.json" />
</head>
<body class="bg-light">
  <div id="app">
    <h1 class="text-xl font-bold p-4">Trip Expense Tracker</h1>
    <!-- UI dynamically generated by ui.js -->
  </div>
  <script src="https://cdn.jsdelivr.net/npm/idb@7/build/umd.js"></script>
  <script src="config.js?v=20250825-06"></script>
  <!-- CropperJS for reliable in-modal cropping -->
  <link href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
  <!-- Optionally loaded at runtime: OpenCV.js and Interact.js -->
  <script>
    window._libLoaders = {
      loadOpenCV() {
        return new Promise((resolve, reject) => {
          if (window.cv && window.cv.getBuildInformation) return resolve(window.cv);
          const s = document.createElement('script');
          s.src = 'https://docs.opencv.org/4.9.0/opencv.js';
          s.async = true; s.defer = true;
          s.onload = () => {
            // OpenCV initializes asynchronously
            const check = () => (window.cv && window.cv.getBuildInformation) ? resolve(window.cv) : setTimeout(check, 50);
            check();
          };
          s.onerror = reject;
          document.head.appendChild(s);
        });
      },
      loadInteract() {
        return new Promise((resolve, reject) => {
          if (window.interact) return resolve(window.interact);
          const s = document.createElement('script');
          s.src = 'https://cdn.jsdelivr.net/npm/@interactjs/interactjs/index.min.js';
          s.async = true; s.defer = true;
          s.onload = () => resolve(window.interact);
          s.onerror = reject;
          document.head.appendChild(s);
        });
      }
    };
  </script>
  <script src="image-editor.js?v=20250825-06"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script>
    if (window['pdfjsLib']) {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="db.js?v=dev"></script>
  <script src="ui.js?v=dev"></script>
  <script src="app.js?v=dev"></script>
  <script src="register-sw.js?v=dev"></script>
</body>
</html>
